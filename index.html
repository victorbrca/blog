<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Victor&#39;s Blog </title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="" />

<meta name="keywords" content="">


<meta property="og:title" content="Victor&#39;s Blog ">
<meta property="og:site_name" content="Victor&#39;s Blog"/>
<meta property="og:url" content="https://blog.victormendonca.com/" />
<meta property="og:locale" content="en">


<meta property="og:type" content="website" />



<link href="https://blog.victormendonca.com/index.xml" rel="alternate" type="application/rss+xml" title="Victor&#39;s Blog" />

<link rel="canonical" href="https://blog.victormendonca.com/" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://blog.victormendonca.com/touch-icon-144-precomposed.png">
<link rel="icon" href="https://blog.victormendonca.com/favicon.png">
<meta name="generator" content="Hugo 0.48" />

  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->



    <link rel="stylesheet" href="https://blog.victormendonca.com/css/bootswatch/default/bootstrap.min.css">


<link rel="stylesheet" href="https://blog.victormendonca.com/css/font-awesome.min.css">
<link rel="stylesheet" href="https://blog.victormendonca.com/css/style.css">


<link rel="stylesheet" href="https://blog.victormendonca.com/css/style_custom.css">



  <link rel="stylesheet" href="https://blog.victormendonca.com/css/highlight/github.css">



  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1P1YY6BDG2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());

      gtag('config', 'G-1P1YY6BDG2');
    </script>
  

</head>
<body class="map[name:default]" data-ng-app="myapp" data-ng-controller="MyController" data-ng-mouseleave="MouseLeave($event)">
    <header id="main-header">
  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        
        <a class="navbar-brand" href="https://blog.victormendonca.com/">
          Victor&#39;s Blog
          
          
          </a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            
            
            <li class="">

              <a href="https://blog.victormendonca.com/" >
                
                Home
              </a>
            </li>
            
            <li class="">

              <a href="https://blog.victormendonca.com/about/" >
                
                About
              </a>
            </li>
            
            <li class="">

              <a href="https://geekit.ca/" >
                
                Professional
              </a>
            </li>
            
            <li class="">

              <a href="https://manhattan.victormendonca.com/" >
                
                Manhattan Blog
              </a>
            </li>
            
            
            
          </ul>
        </div>
        
      </div>
    </nav>
  </header>


  <div class="container">
    
    <div class="row">
      <div class="col-sm-9">
        
        
          <div>
  <h2><a href="https://blog.victormendonca.com/2025/09/25/lxd-creating-reusable-rhel-9-vm-images/">LXD: Creating Reusable RHEL 9 VM Images</a>
</h2>

  <div class="margin-10">
    <small>
  <i class="fa fa-calendar"></i>
  <time datetime="2025-09-25">25 Sep, 2025</time>
</small>

    
  <i class="fa fa-tags"></i>
  
  <a href="https://blog.victormendonca.com/tags/linux" class="label label-primary">Linux</a>
  
  <a href="https://blog.victormendonca.com/tags/containers" class="label label-primary">Containers</a>
  
  <a href="https://blog.victormendonca.com/tags/virtualization" class="label label-primary">Virtualization</a>
  


  </div>
</div>

          <div class="content">
  

<p><img src="https://blog.victormendonca.com/img/lxd-creating-reusable-rhel-9-vm-images/image-0.png" alt="image 0" /></p>

<p>Following the LXD theme of my previous posts, today I’m going to walk you through creating a RHEL 9 VM on LXD, and then show you how to turn that VM into an image. This way, you can spin up new RHEL 9 VMs whenever you want—without having to sit through the whole install/setup process again.</p>

<p>To follow along, you’ll need an active Red Hat subscription. If you’re doing this for personal use (like self-development, home lab tinkering, or just because you enjoy virtual machines as much as Netflix), you can <a href="https://developers.redhat.com/products/rhel/download">download RHEL for free</a> when you sign up for the <strong>Red Hat Developer Subscription for Individuals.</strong></p>

<blockquote>
<p><a href="https://developers.redhat.com/articles/faqs-no-cost-red-hat-enterprise-linux">No-cost Red Hat Enterprise Linux Individual Developer Subscription: FAQs</a></p>

<p><strong>1. What is the Red Hat Developer program&rsquo;s Red Hat Developer Subscription for Individuals?</strong></p>

<p>The Red Hat Developer Subscription for Individuals is a no-cost offering of the Red Hat Developer program and includes access to Red Hat Enterprise Linux among other Red Hat products. It is a program and an offering designed for individual developers, available through the Red Hat Developer program.</p>

<p><strong>2. What Red Hat Enterprise Linux developer subscription is made available at no cost?</strong></p>

<p>The no-cost Red Hat Developer Subscription for Individuals is available and includes Red Hat Enterprise Linux along with numerous other Red Hat technologies. Users can access this no-cost subscription by joining the Red Hat Developer program at developers.redhat.com/register. Joining the program is free.</p>
</blockquote>

<h3 id="creating-the-vm">Creating the VM</h3>

<p>I’ll be using RHEL 9 here, but the same steps apply to other versions.</p>

<p>a. Create an empty VM:</p>

<pre><code class="language-none">lxc init rhel9 --vm --empty
</code></pre>

<p>b. Give the VM a 20GB root disk:</p>

<pre><code class="language-none">lxc config device override rhel9 root size=20GiB
</code></pre>

<p><em>Optional: increase CPU and RAM limits if needed (depending on your profile).</em></p>

<p>c. Add the install disk:</p>

<pre><code class="language-none">lxc config device add rhel9 install disk source=/home/victor/Downloads/OS/rhel-9.6-x86_64-dvd.iso boot.priority=10
</code></pre>

<p>d. Start the VM and go through the RHEL install (not covered here):</p>

<pre><code class="language-none">lxc start rhel9
</code></pre>

<p>e. Remove the install disk when the install is complete:</p>

<pre><code class="language-none">lxc device remove rhel9 install
</code></pre>

<h3 id="install-the-lxd-agent">Install the LXD agent</h3>

<p>It’s a good idea to include the LXD agent in your image—otherwise, you’ll miss out on nice integration features.</p>

<p>a. Mount the config device:</p>

<pre><code class="language-none">mkdir /mnt/iso

mount -t virtiofs config /mnt/iso

cd /mnt/iso
</code></pre>

<p>b. Install and reboot:</p>

<p><img src="https://blog.victormendonca.com/img/lxd-creating-reusable-rhel-9-vm-images/image-1.png" alt="picture 0" /></p>

<p>c. Check that the agent is running:</p>

<pre><code class="language-none">$ lxc exec rhel9 -- systemctl is-active lxd-agent
active
</code></pre>

<h3 id="prepare-the-os">Prepare the OS</h3>

<h4 id="run-updates">Run Updates</h4>

<p>This section is optional and you only need to follow in case you want to get your image updated with the current packages.</p>

<p>a. Connect the VM to your Red Hat account:</p>

<p><em>I&rsquo;m using Red Hat Enterprise Linux Individual Developer Subscription</em></p>

<pre><code class="language-none"># rhc connect
Connecting rhel9 to Red Hat.
This might take a few seconds.

Username: jdoe
Password: *********

● Connected to Red Hat Subscription Management
● Connected to Red Hat Insights
● Activated the Remote Host Configuration daemon

Successfully connected to Red Hat!

Manage your connected systems: https://red.ht/connector
</code></pre>

<p>b. Install updates and reboot:</p>

<pre><code class="language-none"># yum update -y

# dnf needs-restarting -r || reboot
</code></pre>

<p>c. Install any packages or make tweaks you’d like baked into the image.</p>

<h4 id="clean-up-the-os">Clean up the OS</h4>

<p>Before creating the image, let’s tidy things up.</p>

<p>a. Disconnect the VM from Red Hat&rsquo;s network:</p>

<pre><code class="language-none"># rhc disconnect
Disconnecting rhel9 from Red Hat.
This might take a few seconds.

● Deactivated the Remote Host Configuration daemon
● Disconnected from Red Hat Insights
● Disconnected from Red Hat Subscription Management

Manage your connected systems: https://red.ht/connector
</code></pre>

<p>b. Connect to the terminal as root (either via the Terminal tab on LXD&rsquo;s UI, or with <code>lxc exec rhel9 -- /bin/bash</code>).</p>

<p>c. Clean DNF cache:</p>

<pre><code class="language-none">dnf clean all
</code></pre>

<p>d. Clean subscription-manager data:</p>

<pre><code class="language-none">subscription-manager clean
</code></pre>

<p>e. Remove SSH keys:</p>

<pre><code class="language-none">rm -f /etc/ssh/ssh_host_*
</code></pre>

<p>f. Clean up logs:</p>

<pre><code class="language-none">journalctl --vacuum-time=1d

rm -rf /var/log/* /tmp/*
</code></pre>

<p>g. Change hostname to a default one:</p>

<pre><code class="language-none">hostnamectl set-hostname localhost.localdomain
</code></pre>

<p>h. Delete the machine ID:</p>

<pre><code class="language-none">rm -f /etc/machine-id

rm -f /var/lib/dbus/machine-id

touch /etc/machine-id
</code></pre>

<p>i. Delete the user if you created one (optional):</p>

<pre><code class="language-none">userdel -rf redhat
</code></pre>

<p>j. Delete root&rsquo;s history (optional):</p>

<pre><code class="language-none">rm -f /root/.bash_history
</code></pre>

<p>k. Shutdown the machine:</p>

<pre><code class="language-none">poweroff
</code></pre>

<h4 id="edit-the-vm-metadata">Edit the VM Metadata</h4>

<p>Before publishing, edit metadata so your image looks nice and tidy:</p>

<pre><code class="language-none">lxc config metadata edit rhel9
</code></pre>

<p>Example:</p>

<pre><code class="language-yaml">architecture: x86_64
creation_date: 1758825660
expiry_date: 0
properties:
  architecture: x86_64
  description: Red Hat Enterprise Linux 9.6 (Plow)
  os: rhel
  release: Plow
  version: &quot;9.6&quot;
templates: {}
</code></pre>

<p><em>Tip: to get the current date in Unix time, use <code>date +%s</code></em></p>

<h3 id="create-the-image">Create the Image</h3>

<p>We are now ready to create the image with <code>lxc publish</code>:</p>

<pre><code class="language-none">$ lxc publish rhel9 --alias rhel96.x86_64
Instance published with fingerprint: e4ff15c38889676cb3fe1ae0268122294856414b40275ef61cfe0baf23330ae3
</code></pre>

<h3 id="launch-a-new-vm-from-the-image">Launch a New VM from the Image</h3>

<p>And finally, create a fresh VM without all the hassle:</p>

<pre><code class="language-none">$ lxc launch rhel96.x86_64 rhel9-test
Launching rhel9-test
</code></pre>

<p>That’s it—you’ve got a reusable RHEL 9 image. Future VM creation is now basically a one-liner. Way better than babysitting an ISO every time.</p>

</div>


          <footer>
  
<span class="share-box">Share this on:
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.victormendonca.com%2f2025%2f09%2f25%2flxd-creating-reusable-rhel-9-vm-images%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-facebook-official "></i></a>

    <a href="https://twitter.com/intent/tweet?text=LXD%3a%20Creating%20Reusable%20RHEL%209%20VM%20Images&amp;url=https%3a%2f%2fblog.victormendonca.com%2f2025%2f09%2f25%2flxd-creating-reusable-rhel-9-vm-images%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-twitter"></i></a>

    <a href="https://plus.google.com/share?url=https%3a%2f%2fblog.victormendonca.com%2f2025%2f09%2f25%2flxd-creating-reusable-rhel-9-vm-images%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-google-plus"></i></a>

    <a href="http://www.reddit.com/submit?url=https%3a%2f%2fblog.victormendonca.com%2f2025%2f09%2f25%2flxd-creating-reusable-rhel-9-vm-images%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-reddit"></i></a>

    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.victormendonca.com%2f2025%2f09%2f25%2flxd-creating-reusable-rhel-9-vm-images%2f&amp;title=LXD%3a%20Creating%20Reusable%20RHEL%209%20VM%20Images" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-linkedin"></i></a>

    <a href="mailto:?subject=LXD%3a%20Creating%20Reusable%20RHEL%209%20VM%20Images&amp;body=Check out this site https%3a%2f%2fblog.victormendonca.com%2f2025%2f09%2f25%2flxd-creating-reusable-rhel-9-vm-images%2f" data-proofer-ignore=""><i class="fa fa-envelope"></i></a>
  </span>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      
  
    <nav><ul class="pager">
    
        <li class="previous">
          <a href="https://blog.victormendonca.com/2025/09/17/how-to-install-windows-on-lxd/" title="How to install Windows on LXD">
            <span aria-hidden="true">&larr;</span>Previous
          </a>
        </li>
    

    
    </ul> </nav>
  


</div>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  

</div>

</footer>

        
          <div>
  <h2><a href="https://blog.victormendonca.com/2025/09/17/how-to-install-windows-on-lxd/">How to install Windows on LXD</a>
</h2>

  <div class="margin-10">
    <small>
  <i class="fa fa-calendar"></i>
  <time datetime="2025-09-17">17 Sep, 2025</time>
</small>

    
  <i class="fa fa-tags"></i>
  
  <a href="https://blog.victormendonca.com/tags/linux" class="label label-primary">Linux</a>
  
  <a href="https://blog.victormendonca.com/tags/windows" class="label label-primary">Windows</a>
  
  <a href="https://blog.victormendonca.com/tags/virtualization" class="label label-primary">Virtualization</a>
  


  </div>
</div>

          <div class="content">
  

<p><img src="https://blog.victormendonca.com/img/how-to-install-windows-on-lxd/0-windows-on-linux.png" alt="" /></p>

<p>Yes, you can run Windows 10 or 11 inside LXD. It’s actually not that hard—just a few prep steps and some command-line magic. These instructions are written for Arch, but the process is nearly the same on other distros (package names may change a bit).</p>

<p>Let’s go.</p>

<h3 id="step-1-preparing-the-image">Step 1: Preparing the Image</h3>

<p>a. Grab the ISO:</p>

<p>Download Windows from Microsoft like a law-abiding citizen: 👉 <a href="https://www.microsoft.com/en-ca/software-download">https://www.microsoft.com/en-ca/software-download</a></p>

<p>b. Install the required packages</p>

<pre><code class="language-none">pacman -S distrobuilder libguestfs wimlib cdrkit
</code></pre>

<p>c. Repack the ISO for LXD. Note that I&rsquo;m creating a Windows 10 VM</p>

<pre><code class="language-none">sudo distrobuilder repack-windows --windows-arch=amd64 Win10_22H2_English_x64v1.iso Win10_22H2_English_x64v1-lxd.iso
</code></pre>

<h3 id="step-2-prepping-the-vm">Step 2: Prepping the VM</h3>

<p>a. Create an empty VM:</p>

<pre><code class="language-none">$ lxc init windows10 --empty --vm
Creating windows10
</code></pre>

<p>b. Give it a bigger disk</p>

<pre><code class="language-none">$ lxc config device override windows10 root size=55GiB
Device root overridden for windows10
</code></pre>

<p>c. Add CPU and memory</p>

<pre><code class="language-none">lxc config set windows10 limits.cpu=4 limits.memory=6GiB
</code></pre>

<p>d. Add a trusted platform module device</p>

<pre><code class="language-none">$ lxc config device add windows10 vtpm tpm path=/dev/tpm0
Device vtpm added to windows10
</code></pre>

<p>e. Add audio device</p>

<pre><code class="language-none">lxc config set windows10 raw.qemu -- &quot;-device intel-hda -device hda-duplex -audio spice&quot;
</code></pre>

<p>f. Add the install disk. Note that it needs the absolute path</p>

<pre><code class="language-none">$ lxc config device add windows10 install disk source=/home/victor/Downloads/OS/Win10_22H2_English_x64v1-lxd.iso boot.priority=10
Device install added to windows10
</code></pre>

<h3 id="step-3-install-windows">Step 3: Install Windows</h3>

<p>a. Start the VM and connect:</p>

<pre><code class="language-none">lxc start windows10 --console=vga
</code></pre>

<p>b. &ldquo;Press any key&rdquo; to boot from CD and install Windows</p>

<p>c. Go through the usual Windows install:</p>

<p><img src="https://blog.victormendonca.com/img/how-to-install-windows-on-lxd/1-windows-install.png" alt="" /></p>

<p>You can also use the LXD WebUI console to monitor reboots:</p>

<p><img src="https://blog.victormendonca.com/img/how-to-install-windows-on-lxd/2-windows-finishing-install.png" alt="" /></p>

<h3 id="step-3-clean-up">Step 3: Clean Up</h3>

<p>Remove the install ISO when you’re done:</p>

<pre><code class="language-none">$ lxc config device remove windows10 install
Device install removed from windows10
</code></pre>

<h3 id="conclusion">Conclusion</h3>

<p>And that’s it—you now have Windows running on LXD. Pretty painless, right?</p>

<p><img src="https://blog.victormendonca.com/img/how-to-install-windows-on-lxd/4-windows-installed.png" alt="" /></p>

</div>


          <footer>
  
<span class="share-box">Share this on:
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.victormendonca.com%2f2025%2f09%2f17%2fhow-to-install-windows-on-lxd%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-facebook-official "></i></a>

    <a href="https://twitter.com/intent/tweet?text=How%20to%20install%20Windows%20on%20LXD&amp;url=https%3a%2f%2fblog.victormendonca.com%2f2025%2f09%2f17%2fhow-to-install-windows-on-lxd%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-twitter"></i></a>

    <a href="https://plus.google.com/share?url=https%3a%2f%2fblog.victormendonca.com%2f2025%2f09%2f17%2fhow-to-install-windows-on-lxd%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-google-plus"></i></a>

    <a href="http://www.reddit.com/submit?url=https%3a%2f%2fblog.victormendonca.com%2f2025%2f09%2f17%2fhow-to-install-windows-on-lxd%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-reddit"></i></a>

    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.victormendonca.com%2f2025%2f09%2f17%2fhow-to-install-windows-on-lxd%2f&amp;title=How%20to%20install%20Windows%20on%20LXD" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-linkedin"></i></a>

    <a href="mailto:?subject=How%20to%20install%20Windows%20on%20LXD&amp;body=Check out this site https%3a%2f%2fblog.victormendonca.com%2f2025%2f09%2f17%2fhow-to-install-windows-on-lxd%2f" data-proofer-ignore=""><i class="fa fa-envelope"></i></a>
  </span>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      
  
    <nav><ul class="pager">
    
        <li class="previous">
          <a href="https://blog.victormendonca.com/2025/09/03/exploring-lxd-the-linux-container-daemon/" title="Exploring LXD (The Linux Container Daemon)">
            <span aria-hidden="true">&larr;</span>Previous
          </a>
        </li>
    

    
      <li class="next">
        <a href="https://blog.victormendonca.com/2025/09/25/lxd-creating-reusable-rhel-9-vm-images/" title="LXD: Creating Reusable RHEL 9 VM Images">
            Next <span aria-hidden="true">&rarr;</span>
        </a>
      </li>
    
    </ul> </nav>
  


</div>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  

</div>

</footer>

        
          <div>
  <h2><a href="https://blog.victormendonca.com/2025/09/03/exploring-lxd-the-linux-container-daemon/">Exploring LXD (The Linux Container Daemon)</a>
</h2>

  <div class="margin-10">
    <small>
  <i class="fa fa-calendar"></i>
  <time datetime="2025-09-03">3 Sep, 2025</time>
</small>

    
  <i class="fa fa-tags"></i>
  
  <a href="https://blog.victormendonca.com/tags/linux" class="label label-primary">Linux</a>
  
  <a href="https://blog.victormendonca.com/tags/containers" class="label label-primary">Containers</a>
  
  <a href="https://blog.victormendonca.com/tags/virtualization" class="label label-primary">Virtualization</a>
  


  </div>
</div>

          <div class="content">
  

<p>Last week, I attended a virtual talk hosted by Canonical on building a homelab with microservices. During the session, I discovered a new (to me) and very cool utility that&rsquo;s perfect for managing virtual machines and containers from a centralized interface: LXD, or the Linux Container Daemon.</p>

<p><img src="https://blog.victormendonca.com/img/exploring-lxd-the-linux-container-daemon/header.png" alt="picture 0" /></p>

<p>While LXD isn&rsquo;t new—it’s actually been around since 2016—it’s still flying under the radar for a lot of homelab enthusiasts. After seeing it in action, I realized it&rsquo;s a hidden gem worth exploring.</p>

<h4 id="why-lxd-stands-out">Why LXD Stands Out</h4>

<p>LXD offers a unified way to manage both containers and VMs—whether through the command line (lxc), a web-based UI, or via REST APIs (though I won’t dive into the API side here).</p>

<p>This makes LXD an excellent choice for home labs because it lets you manage everything from one central &ldquo;application&rdquo; instead of juggling multiple tools for VMs and containers separately.</p>

<h4 id="features-that-caught-my-attention">Features That Caught My Attention</h4>

<p>Here are some of the standout features that make LXD so powerful:</p>

<ul>
<li>Run System Containers

<ul>
<li>LXD can run full Linux distributions inside containers (unlike Docker, which is app-focused).</li>
<li>Containers behave like lightweight virtual machines.</li>
<li>You can run Ubuntu, Alpine, Debian, CentOS, etc., inside LXD containers.</li>
</ul></li>
<li>Run Virtual Machines

<ul>
<li>LXD supports running full virtual machines (VMs) using QEMU/KVM.</li>
<li>This allows mixing containers and VMs on the same host with a single tool.</li>
</ul></li>
<li>Manage Container &amp; VM Lifecycle

<ul>
<li>Create, start, stop, pause, delete containers/VMs.</li>
<li>Snapshots and restore functionality.</li>
<li>Clone containers or VMs.</li>
</ul></li>
<li>Image Management

<ul>
<li>Download and use images from remote repositories.</li>
<li>Build and publish your own custom container/VM images.</li>
</ul></li>
<li>Networking

<ul>
<li>LXD provides built-in bridged, macvlan, and fan networking modes.</li>
<li>Supports IPv4 and IPv6, NAT, and DNS.</li>
</ul></li>
<li>Resource Limits

<ul>
<li>Apply resource limits like CPU, RAM, disk I/O, network bandwidth.</li>
<li>Useful for multi-tenant or production environments.</li>
</ul></li>
<li>Cluster Mode

<ul>
<li>LXD supports clustering — multiple nodes sharing the same configuration.</li>
</ul></li>
</ul>

<p><em>There’s a lot more that LXD can do, but these are the features that really stood out for my personal homelab use case.</em></p>

<h3 id="getting-started">Getting Started</h3>

<p>LXD currently ships via Snap packages. You can easily install it by running the command below, and that will also install all the requirements:</p>

<pre><code class="language-bash">sudo snap install lxd
</code></pre>

<p>Once installed, you’ll need to initialize it. Running <code>lxd init</code> will prompt a series of configuration questions (e.g., storage, network type, clustering, etc.). If you’re just setting things up for testing, feel free to use the same answers I did below — but it’s always a good idea to consult the official <a href="https://documentation.ubuntu.com/server/how-to/containers/lxd-containers/">LXD Documentation</a> for a deeper understanding:</p>

<pre><code class="language-none">$ sudo lxd init

Would you like to use LXD clustering? (yes/no) [default=no]:
Do you want to configure a new storage pool? (yes/no) [default=yes]:
Name of the new storage pool [default=default]:
Name of the storage backend to use (btrfs, ceph, dir, lvm, powerflex) [default=btrfs]: dir
Would you like to connect to a MAAS server? (yes/no) [default=no]:
Would you like to create a new local network bridge? (yes/no) [default=yes]:
What should the new bridge be called? [default=lxdbr0]:
What IPv4 address should be used? (CIDR subnet notation, “auto” or “none”) [default=auto]:
What IPv6 address should be used? (CIDR subnet notation, “auto” or “none”) [default=auto]: none
Would you like the LXD server to be available over the network? (yes/no) [default=no]: yes
Address to bind LXD to (not including port) [default=all]:
Port to bind LXD to [default=8443]:
Would you like stale cached images to be updated automatically? (yes/no) [default=yes]:
Would you like a YAML &quot;lxd init&quot; preseed to be printed? (yes/no) [default=no]:
</code></pre>

<p>The lxc command is a command-line client used to interact with the LXD daemon. To use the <code>lxc</code> command as a non-root user, you&rsquo;ll need to add your user to the &lsquo;lxd&rsquo; group:</p>

<pre><code class="language-bash">sudo usermod -a -G lxd [my_user]
</code></pre>

<p><strong>⚠️ Important Notes:</strong></p>

<ul>
<li>This change only takes effect after you log out and back in.</li>
<li>Adding a non-root user to the &lsquo;lxd&rsquo; group essentialy gives root access to that user.</li>
</ul>

<h4 id="configuring-access-to-the-web-ui">Configuring Access to the WEB UI</h4>

<p>At this point, LXD should be running. You can now access the Web UI at &lsquo;<a href="https://127.0.0.1:8443/'">https://127.0.0.1:8443/'</a>.</p>

<p>Since it uses a self-signed certificate, your browser will warn you. Just click “Accept the Risk and Continue” (or equivalent in your browser):</p>

<p><img src="https://blog.victormendonca.com/img/exploring-lxd-the-linux-container-daemon/webui1.png" alt="webui1" /></p>

<p>LXD uses certificate authentication, so you’ll need to generate and trust one.</p>

<p>a. Click &ldquo;Create a new certificate&rdquo;:</p>

<p><img src="https://blog.victormendonca.com/img/exploring-lxd-the-linux-container-daemon/webui2.png" alt="webui2" /></p>

<p>b. Then click “Generate”:</p>

<p><img src="https://blog.victormendonca.com/img/exploring-lxd-the-linux-container-daemon/webui3.png" alt="webui3" /></p>

<p>c. Enter a password for the certificate and click on &ldquo;Generate certificate&rdquo;:</p>

<p><img src="https://blog.victormendonca.com/img/exploring-lxd-the-linux-container-daemon/webui4.png" alt="webui4" /></p>

<p>d. Download the certificate and trust it from the terminal:</p>

<p><img src="https://blog.victormendonca.com/img/exploring-lxd-the-linux-container-daemon/webui5.png" alt="webui5" /></p>

<pre><code>$ lxc config trust add Downloads/lxd-ui-127.0.0.1.crt

To start your first container, try: lxc launch ubuntu:24.04
Or for a virtual machine: lxc launch ubuntu:24.04 --vm
</code></pre>

<p>f. To access the Web UI you&rsquo;ll also need to import the .pfx file into your browser’s certificate store. Follow your browser&rsquo;s instructions for importing client certificates:</p>

<p><img src="https://blog.victormendonca.com/img/exploring-lxd-the-linux-container-daemon/webui6.png" alt="webui6" /></p>

<p>g. Once imported, restart your browser and visit &lsquo;<a href="https://127.0.0.1:8443/'">https://127.0.0.1:8443/'</a> again — you should be logged in automatically:</p>

<p><img src="https://blog.victormendonca.com/img/exploring-lxd-the-linux-container-daemon/webui7.png" alt="webui7" /></p>

<h4 id="additional-configuration">Additional Configuration</h4>

<p>By default the storage, when &lsquo;dir&rsquo; was set as type, will be inside the storage for the LXD snap (<code>/var/snap/lxd/common/lxd/storage-pools/default</code>). You will probably want to change that. Unfortunatelly you can&rsquo;t change the default location, so we&rsquo;ll just add a new one and set it to default.</p>

<p><img src="https://blog.victormendonca.com/img/exploring-lxd-the-linux-container-daemon/storage-1.png" alt="" /></p>

<p>Let&rsquo;s make this change via command line.</p>

<p>a. First create a new volume pool (I created mine in <code>/mnt/storage2/VMs/lxd</code>):</p>

<pre><code class="language-none">$ lxc storage create main dir source=/mnt/storage2/VMs/lxd

Storage pool main created
</code></pre>

<p>b. You can check that it was created with:</p>

<pre><code class="language-none">$ lxc storage list

+---------+--------+------------------------------------------------+-------------+---------+---------+
|  NAME   | DRIVER |                     SOURCE                     | DESCRIPTION | USED BY |  STATE  |
+---------+--------+------------------------------------------------+-------------+---------+---------+
| default | dir    | /var/snap/lxd/common/lxd/storage-pools/default |             | 1       | CREATED |
+---------+--------+------------------------------------------------+-------------+---------+---------+
| main    | dir    | /mnt/storage2/VMs/lxd                          |             | 0       | CREATED |
+---------+--------+------------------------------------------------+-------------+---------+---------+
</code></pre>

<p>c. Now let&rsquo;s set it as the default pool:</p>

<pre><code class="language-none">lxc profile device set default root pool=[pool name]
</code></pre>

<p><em>When you create an instance, LXD automatically creates the required storage volumes for it, so I will not cover it here.</em></p>

<h3 id="creating-instances">Creating Instances</h3>

<p>Creating both container and VM instances via the UI is extremelly easy.</p>

<h4 id="containers">Containers</h4>

<p>We are going to create a container based on the AmazonLinux 2023 image.</p>

<p>a. Back on the UI, browse to &ldquo;Instances&rdquo; and click on &ldquo;Create instance&rdquo;:</p>

<p><img src="https://blog.victormendonca.com/img/exploring-lxd-the-linux-container-daemon/create-instance-1.png" alt="" /></p>

<p>b. Click on &ldquo;Browse images&rdquo;:</p>

<p><img src="https://blog.victormendonca.com/img/exploring-lxd-the-linux-container-daemon/create-instance-2.png" alt="" /></p>

<p>c. Filter the distribution by &ldquo;Amazon Linux&rdquo;, the type as &ldquo;Container&rdquo;, and click on &ldquo;Select&rdquo;:</p>

<p><img src="https://blog.victormendonca.com/img/exploring-lxd-the-linux-container-daemon/create-instance-3.png" alt="" /></p>

<p>d. Give it a name and description and click on &ldquo;Create and start&rdquo;:</p>

<p><img src="https://blog.victormendonca.com/img/exploring-lxd-the-linux-container-daemon/create-instance-4.png" alt="" /></p>

<p><em><strong>Tip:</strong> Don&rsquo;t forget to poke around the options on the left next time you create an instance.</em></p>

<p>It should only take a few seconds for your container to be created and start running. You can access the container from the &ldquo;Terminal&rdquo; tab:</p>

<p><img src="https://blog.victormendonca.com/img/exploring-lxd-the-linux-container-daemon/create-instance-5.png" alt="" /></p>

<p>You can also access it via the terminal with <code>lxc console</code>, however that will require a password:</p>

<p><img src="https://blog.victormendonca.com/img/exploring-lxd-the-linux-container-daemon/create-instance-8.png" alt="" /></p>

<h4 id="vms">VMs</h4>

<p>We are going to create an Ubuntu VM with graphical interface.</p>

<p>a. Repeat the same steps as before, but now select Ubuntu as the distribution, VM as the type, and a LTS version:</p>

<p><img src="https://blog.victormendonca.com/img/exploring-lxd-the-linux-container-daemon/create-instance-6.png" alt="" /></p>

<p>b. Give it a name/description, and under &ldquo;Resource limits&rdquo; set the memory limit to &lsquo;2 GiB&rsquo;. Then click on &ldquo;Create and start&rdquo;:</p>

<p><img src="https://blog.victormendonca.com/img/exploring-lxd-the-linux-container-daemon/create-instance-7.png" alt="" /></p>

<p>c. Once the VM is running, access the terminal tab the same way we did before and install <code>ubuntu-desktop</code>:</p>

<pre><code class="language-bash">apt update &amp;&amp; apt install ubuntu-desktop
</code></pre>

<p>Now is a great time to go grab a coffee&hellip; this will take a little while&hellip;</p>

<p>d. When the install is complete change the password for the &lsquo;ubuntu&rsquo; user and reboot:</p>

<pre><code class="language-none"># passwd ubuntu

New password:
BAD PASSWORD: The password is shorter than 8 characters
Retype new password:
passwd: password updated successfully

# reboot
</code></pre>

<p>d. Go to the &ldquo;Console&rdquo; tab. You should see boot output and evetually be presented with the login window. You can login and use the VM from your browser:</p>

<p><img src="https://blog.victormendonca.com/img/exploring-lxd-the-linux-container-daemon/vm-instance-1.png" alt="" /></p>

<p>And you can also access the VM graphical interface via the <code>lxc connect</code> command with the <code>--type=vga</code> flag:</p>

<pre><code class="language-bash">lxc console ubuntu-2404 --type=vga
</code></pre>

<p><img src="https://blog.victormendonca.com/img/exploring-lxd-the-linux-container-daemon/vm-instance-2.png" alt="" /></p>

<h3 id="conclusion">Conclusion</h3>

<p>LXD might not be as flashy or widely known as Docker, but it fills a unique and valuable niche. It gives you the simplicity of containers and the power of full VMs — all under one roof. For homelabbers, that means less tool sprawl, cleaner management, and more flexibility to experiment.</p>

<p>Whether you’re just getting started with containers or looking to consolidate your virtualization setup, LXD is absolutely worth a try. With its web UI, clustering support, and straightforward setup, it can quickly become the backbone of a modern homelab.</p>

</div>


          <footer>
  
<span class="share-box">Share this on:
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.victormendonca.com%2f2025%2f09%2f03%2fexploring-lxd-the-linux-container-daemon%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-facebook-official "></i></a>

    <a href="https://twitter.com/intent/tweet?text=Exploring%20LXD%20%28The%20Linux%20Container%20Daemon%29&amp;url=https%3a%2f%2fblog.victormendonca.com%2f2025%2f09%2f03%2fexploring-lxd-the-linux-container-daemon%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-twitter"></i></a>

    <a href="https://plus.google.com/share?url=https%3a%2f%2fblog.victormendonca.com%2f2025%2f09%2f03%2fexploring-lxd-the-linux-container-daemon%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-google-plus"></i></a>

    <a href="http://www.reddit.com/submit?url=https%3a%2f%2fblog.victormendonca.com%2f2025%2f09%2f03%2fexploring-lxd-the-linux-container-daemon%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-reddit"></i></a>

    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.victormendonca.com%2f2025%2f09%2f03%2fexploring-lxd-the-linux-container-daemon%2f&amp;title=Exploring%20LXD%20%28The%20Linux%20Container%20Daemon%29" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-linkedin"></i></a>

    <a href="mailto:?subject=Exploring%20LXD%20%28The%20Linux%20Container%20Daemon%29&amp;body=Check out this site https%3a%2f%2fblog.victormendonca.com%2f2025%2f09%2f03%2fexploring-lxd-the-linux-container-daemon%2f" data-proofer-ignore=""><i class="fa fa-envelope"></i></a>
  </span>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      
  
    <nav><ul class="pager">
    
        <li class="previous">
          <a href="https://blog.victormendonca.com/2025/08/22/top-skills-that-will-make-you-stand-out-as-a-linux-admin-part-1/" title="Top Skills That Will Make You Stand Out as a Linux Admin: Part 1">
            <span aria-hidden="true">&larr;</span>Previous
          </a>
        </li>
    

    
      <li class="next">
        <a href="https://blog.victormendonca.com/2025/09/17/how-to-install-windows-on-lxd/" title="How to install Windows on LXD">
            Next <span aria-hidden="true">&rarr;</span>
        </a>
      </li>
    
    </ul> </nav>
  


</div>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  

</div>

</footer>

        
          <div>
  <h2><a href="https://blog.victormendonca.com/2025/08/22/top-skills-that-will-make-you-stand-out-as-a-linux-admin-part-1/">Top Skills That Will Make You Stand Out as a Linux Admin: Part 1</a>
</h2>

  <div class="margin-10">
    <small>
  <i class="fa fa-calendar"></i>
  <time datetime="2025-08-22">22 Aug, 2025</time>
</small>

    
  <i class="fa fa-tags"></i>
  
  <a href="https://blog.victormendonca.com/tags/bash" class="label label-primary">Bash</a>
  
  <a href="https://blog.victormendonca.com/tags/linux" class="label label-primary">Linux</a>
  


  </div>
</div>

          <div class="content">
  

<p>Working as a Linux administrator often means being pulled in many directions and juggling a variety of technologies. That doesn’t leave much time to revisit the basics. Over time, work becomes repetitive, and we end up doing things the same way we learned years ago—without stopping to refine or discover smarter approaches.</p>

<p>With this series of posts, I hope to share tips and shortcuts that will help you work faster and smarter—and maybe even stand out among your coworkers by pulling off a few neat tricks.</p>

<p>Try these out at least once—and if you’re still stuck going to the office, print them out and stick them on your cubicle wall.</p>

<p>Today, we’re going to focus on Bash navigation and history.</p>

<p><img src="https://blog.victormendonca.com/img/top-skills-that-will-make-you-stand-out-as-a-linux-admin/TuxandBashGuideinFocus.png" alt="picture 0" /></p>

<h3 id="tab-completion">Tab Completion</h3>

<p>We all know that <code>[TAB]</code> can be used for both path and command completion, but I’m always surprised by how many admins who aren’t fully comfortable with the shell forget to use it. You’re not going to break anything or use up some imaginary “tab credits.” So use the hell out of tab completion—keep hitting that key until you land on what you need.</p>

<p>And here’s a bonus: don’t forget that <code>[SHIFT]+[TAB]</code> takes you back. So if you scroll past the option or path you were aiming for, just reverse it. Simple, fast, and much smoother than retyping.</p>

<h3 id="command-navigation">Command Navigation</h3>

<p>The commands below will help you navigate more efficiently and productively in a shell:</p>

<ul>
<li><code>Ctrl+a</code> - Move to the beginning of the line (same as <code>[HOME]</code>)</li>
<li><code>Ctrl+e</code> - Move to the end of the line (same as <code>[END]</code>)</li>
<li><code>Ctrl+left/right</code> - Move backward/forward one word</li>
<li><code>Ctrl+w</code> - Delete the previous word</li>
<li><code>Alt+t</code> - Swap the current word with the previous one</li>
<li><code>Esc+v</code> - Edit the current line in an external editor (this is the <code>edit-and-execute-command</code> function). It uses the default editor set in <code>$VISUAL</code> or <code>$EDITOR</code>, which you can change if needed</li>
</ul>

<p><img src="https://blog.victormendonca.com/img/top-skills-that-will-make-you-stand-out-as-a-linux-admin/command-navigation.gif" alt="picture 0" /></p>

<p><em>Note: I remapped my <code>edit-and-execute-command</code> shortcut to <code>Esc+i</code>, which feels more comfortable for me.</em></p>

<h2 id="path-navigation">Path Navigation</h2>

<p>Navigating between directories is something sysadmins do constantly. Being able to move around quickly—and knowing a few tricks—can speed up your work exponentially. It can even impress your coworkers when they see how fast you glide through the shell.</p>

<ul>
<li><strong>Tab completion</strong> — We already covered this, but it’s worth repeating: use it and abuse it!</li>
<li><code>cd</code> — Jumps straight back to your home folder. It sounds obvious, but many people forget this one.</li>
<li><code>cd -</code> — Switches to the previous directory you were in. Great for bouncing back and forth.</li>
<li><code>cd ~</code> — Navigates to your home folder. The tilde (<code>~</code>) is very handy for quickly moving to subdirectories inside your home directory, e.g.: <code>cd ~/Downloads</code></li>
</ul>

<p><img src="https://blog.victormendonca.com/img/top-skills-that-will-make-you-stand-out-as-a-linux-admin/Penguin-and-Staples-on-Office-Desk.png" alt="picture 0" /></p>

<h3 id="history">History</h3>

<p>As you probably already know, <code>history</code> lets you go back to previous commands and re-execute them. Mastering how to quickly search and re-use previous commands saves you from tediously retyping the same things over and over.</p>

<ul>
<li><code>Ctrl+r</code> — Search your history for a specific string

<ul>
<li>Use <code>[Shift]</code> to go back if you skip past the command you wanted</li>
<li>Start typing the string before pressing <code>Ctrl+r</code> to act as a filter and only see matches for that string</li>
</ul></li>
<li><code>!!</code> — Re-execute the last command. Super handy when you forget sudo. Just type <code>sudo !!</code></li>

<li><p><code>!$</code> — The last argument of your previous command. Useful if you mistyped a command and want to reuse its argument, e.g.:</p>

<pre><code class="language-bash">userdle testuser   # typo
userdel !$         # fixes it using the last argument
</code></pre>

<ul>
<li>It’s also great for running the last command with sudo, similar to <code>!!</code></li>
</ul></li>

<li><p><code>Alt+.</code> — Inserts the last argument of your previous command directly into the current line (and shows it to you). It’s effectively the same as typing <code>!$</code>, but more interactive since it shows the result as you type. Keep pressing it to cycle through arguments from earlier commands.</p></li>
</ul>

<p><strong>💡 Tips:</strong></p>

<ul>
<li>Remember to use <code>Esc+v</code> to quickly open a previous command in your editor if it needs modification</li>

<li><p>Bash history can be customized to be even more powerful:</p>

<ul>
<li><p><code>HISTTIMEFORMAT</code> — Add timestamps to your command history. E.g.:</p>

<pre><code>$ history | tail -2
1029  +2025/08/22 14:52:19 uptime
1030  +2025/08/22 14:52:21 history | tail -2
</code></pre></li>

<li><p><code>HISTSIZE</code> and <code>HISTFILESIZE</code> — Increase how many commands are stored in memory and on disk</p></li>

<li><p><code>shopt -s histappend</code> — Append to your history file instead of overwriting it. This way you don’t lose commands when multiple shells are open</p></li>
</ul></li>
</ul>

<h2 id="conclusion">Conclusion</h2>

<p>That wraps up our quick dive into Bash navigation, history, and some handy shortcuts to speed up your workflow. Try them out, and stay tuned—there’s plenty more cool stuff coming in the next posts!</p>

</div>


          <footer>
  
<span class="share-box">Share this on:
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.victormendonca.com%2f2025%2f08%2f22%2ftop-skills-that-will-make-you-stand-out-as-a-linux-admin-part-1%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-facebook-official "></i></a>

    <a href="https://twitter.com/intent/tweet?text=Top%20Skills%20That%20Will%20Make%20You%20Stand%20Out%20as%20a%20Linux%20Admin%3a%20Part%201&amp;url=https%3a%2f%2fblog.victormendonca.com%2f2025%2f08%2f22%2ftop-skills-that-will-make-you-stand-out-as-a-linux-admin-part-1%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-twitter"></i></a>

    <a href="https://plus.google.com/share?url=https%3a%2f%2fblog.victormendonca.com%2f2025%2f08%2f22%2ftop-skills-that-will-make-you-stand-out-as-a-linux-admin-part-1%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-google-plus"></i></a>

    <a href="http://www.reddit.com/submit?url=https%3a%2f%2fblog.victormendonca.com%2f2025%2f08%2f22%2ftop-skills-that-will-make-you-stand-out-as-a-linux-admin-part-1%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-reddit"></i></a>

    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.victormendonca.com%2f2025%2f08%2f22%2ftop-skills-that-will-make-you-stand-out-as-a-linux-admin-part-1%2f&amp;title=Top%20Skills%20That%20Will%20Make%20You%20Stand%20Out%20as%20a%20Linux%20Admin%3a%20Part%201" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-linkedin"></i></a>

    <a href="mailto:?subject=Top%20Skills%20That%20Will%20Make%20You%20Stand%20Out%20as%20a%20Linux%20Admin%3a%20Part%201&amp;body=Check out this site https%3a%2f%2fblog.victormendonca.com%2f2025%2f08%2f22%2ftop-skills-that-will-make-you-stand-out-as-a-linux-admin-part-1%2f" data-proofer-ignore=""><i class="fa fa-envelope"></i></a>
  </span>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      
  
    <nav><ul class="pager">
    
        <li class="previous">
          <a href="https://blog.victormendonca.com/2024/09/09/logrotate-simplifying-log-management/" title="Logrotate: Simplifying Log Management">
            <span aria-hidden="true">&larr;</span>Previous
          </a>
        </li>
    

    
      <li class="next">
        <a href="https://blog.victormendonca.com/2025/09/03/exploring-lxd-the-linux-container-daemon/" title="Exploring LXD (The Linux Container Daemon)">
            Next <span aria-hidden="true">&rarr;</span>
        </a>
      </li>
    
    </ul> </nav>
  


</div>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  

</div>

</footer>

        
          <div>
  <h2><a href="https://blog.victormendonca.com/2024/09/09/logrotate-simplifying-log-management/">Logrotate: Simplifying Log Management</a>
</h2>

  <div class="margin-10">
    <small>
  <i class="fa fa-calendar"></i>
  <time datetime="2024-09-09">9 Sep, 2024</time>
</small>

    
  <i class="fa fa-tags"></i>
  
  <a href="https://blog.victormendonca.com/tags/linux" class="label label-primary">Linux</a>
  
  <a href="https://blog.victormendonca.com/tags/administration" class="label label-primary">Administration</a>
  
  <a href="https://blog.victormendonca.com/tags/ansible" class="label label-primary">Ansible</a>
  


  </div>
</div>

          <div class="content">
  

<p><code>logrotate</code> is a system utility designed to manage log files, ensuring that logs don&rsquo;t consume excessive disk space by rotating, compressing, and removing old logs according to user-defined rules. This post will help you get familiar with <code>logrotate</code> configuration and usage.</p>

<p>By configuring and running <code>logrotate</code> effectively, you can automate log management, saving space, and ensuring your logs stay manageable over time.</p>

<h2 id="main-config">Main Config</h2>

<p>The primary configuration file for <code>logrotate</code> is located at <code>/etc/logrotate.conf</code>. It sets default values and contains the directory for additional configuration files (typically <code>/etc/logrotate.d</code>):</p>

<pre><code class="language-bash"># see &quot;man logrotate&quot; for details
# rotate log files weekly
weekly

# keep 4 weeks worth of backlogs
rotate 4

# create new (empty) log files after rotating old ones
create

# use date as a suffix of the rotated file
dateext

# uncomment this if you want your log files compressed
#compress

# RPM packages drop log rotation information into this directory
include /etc/logrotate.d

# no packages own wtmp and btmp -- we'll rotate them here
/var/log/wtmp {
    monthly
    create 0664 root utmp
    minsize 1M
    rotate 1
}

/var/log/btmp {
    missingok
    monthly
    create 0600 root utmp
    rotate 1
}
</code></pre>

<h2 id="configuration-files">Configuration Files</h2>

<p>The configuration file for each application or log location usually resides under <code>/etc/logrotate.d/</code> and can contain various options to control how logs are handled.</p>

<h3 id="common-options">Common Options</h3>

<ul>
<li><code>hourly</code> – Rotate logs every hour (<em>requires cron to run logrotate hourly</em>).</li>
<li><code>daily</code> – Rotate logs daily.</li>
<li><code>weekly [weekday]</code> – Rotate logs once per week.</li>
<li><code>monthly</code> – Rotate logs the first time <code>logrotate</code> is run in a month.</li>
<li><code>yearly</code> – Rotate logs once a year.</li>
<li><code>rotate [count]</code> – Defines how many rotated logs to keep. If set to 0, logs are deleted instead of being rotated.</li>
<li><code>minsize [size]</code> – Rotate logs when they exceed a specific size, while also respecting the time interval (daily, weekly, etc.).</li>
<li><code>size [size]</code> – Rotate only when log size exceeds the defined limit.</li>
<li><code>maxage [days]</code> – Remove rotated logs after a specified number of days.</li>
<li><code>missingok</code> – Continue without error if the log file is missing.</li>
<li><code>notifempty</code> – Skip rotation if the log file is empty.</li>
<li><code>create [mode] [owner] [group]</code> – Create a new log file with specified permissions, owner, and group.</li>
<li><code>compress</code> – Compress rotated logs.</li>
<li><code>delaycompress</code> – Delay compression until the next rotation cycle.</li>
<li><code>copytruncate</code> – Truncate the log after copying it to the rotated file.</li>
<li><code>sharedscripts</code> – Ensures that post-rotation scripts are executed only once.</li>
<li><code>postrotate/endscript</code> – Define commands to be executed after log rotation:</li>
</ul>

<pre><code class="language-bash">postrotate
  /opt/life/tools/stop-approve.sh &amp;&amp; /opt/life/tools/start-approve.sh
endscript
</code></pre>

<h3 id="examples">Examples</h3>

<h4 id="example-1-deleting-old-nmon-files">Example 1: Deleting Old NMON Files</h4>

<p>This example deletes NMON output files that are older than 3 months or larger than 5 MB:</p>

<pre><code class="language-bash"># Logrotate config for nmon
/var/log/nmon/*.nmon {
  rotate 0
  maxage 90
  size 5M
}
</code></pre>

<h4 id="example-2-compressing-lms-logs">Example 2: Compressing LMS Logs</h4>

<p>In this case, <code>logrotate</code> keeps 10 compressed versions of logs, rotating them when logs are older than 12 months or larger than 5 MB:</p>

<pre><code class="language-bash"># Logrotate config for LMS
/home/my_admin/cmd/log/*.log {
  rotate 10
  maxage 360
  size 5M
  compress
}
</code></pre>

<h3 id="creating-a-new-configuration-file">Creating a New Configuration File</h3>

<p>To create a new log rotation rule, drop a configuration file into the <code>/etc/logrotate.d/</code> directory. Ensure the scheduler for <code>logrotate</code> (either cron or systemd) is set up correctly.</p>

<blockquote>
<p><strong>Tip:</strong> Double-check your scheduler settings to ensure smooth log rotation.</p>
</blockquote>

<h2 id="testing-and-running-logrotate">Testing and Running Logrotate</h2>

<h3 id="testing">Testing</h3>

<h4 id="dry-run">Dry-Run</h4>

<p>Before applying your configuration, you can test it with a dry-run using the <code>-d</code> option:</p>

<pre><code class="language-bash">logrotate -d [my_config_file].conf
</code></pre>

<h4 id="verbosity">Verbosity</h4>

<p>To view detailed steps, run <code>logrotate</code> with the <code>-v</code> option (useful with <code>-d</code> for dry-run testing):</p>

<pre><code class="language-bash">logrotate -vd [my_config_file].conf
</code></pre>

<h3 id="scheduling-logrotate">Scheduling Logrotate</h3>

<p><code>logrotate</code> can be scheduled using either cron or systemd. Here&rsquo;s a quick overview of both methods:</p>

<h4 id="cron">Cron</h4>

<p>When using cron, the <code>logrotate</code> job is typically defined in <code>/etc/cron.daily/logrotate</code>:</p>

<pre><code class="language-bash">#!/bin/sh

/usr/sbin/logrotate -s /var/lib/logrotate/logrotate.status /etc/logrotate.conf
EXITVALUE=$?
if [ $EXITVALUE != 0 ]; then
    /usr/bin/logger -t logrotate &quot;ALERT exited abnormally with [$EXITVALUE]&quot;
fi
exit 0
</code></pre>

<h4 id="systemd">Systemd</h4>

<p>Systemd can also manage logrotate via <code>logrotate.timer</code> and <code>logrotate.service</code>.</p>

<p><em>logrotate.timer</em>:</p>

<pre><code class="language-systemd">[Unit]
Description=Daily rotation of log files

[Timer]
OnCalendar=daily
RandomizedDelaySec=1h
Persistent=true

[Install]
WantedBy=timers.target
</code></pre>

<p><em>logrotate.service</em>:</p>

<pre><code class="language-systemd">[Unit]
Description=Rotate log files

[Service]
Type=oneshot
ExecStart=/usr/sbin/logrotate /etc/logrotate.conf
</code></pre>

<h4 id="personal-cron-job">Personal Cron Job</h4>

<p>You can also schedule <code>logrotate</code> manually through a personal cron job:</p>

<pre><code class="language-bash"># Runs logrotate daily
@daily /sbin/logrotate -s /home/my_admin/cmd/log/logrotate.status /home/my_admin/cmd/logrotate.conf &gt;&gt; /home/my_admin/cmd/log/cron.log 2&gt;&amp;1
</code></pre>

<h2 id="creating-logrotate-with-ansible">Creating Logrotate With Ansible</h2>

<p>Managing log rotation through Ansible is a powerful way to automate log maintenance across multiple servers. Below is an example of how you can create a <code>logrotate</code> configuration using Ansible.</p>

<h3 id="ansible-playbook-example">Ansible Playbook Example</h3>

<p>This playbook installs <code>logrotate</code> (if it&rsquo;s not already installed) and creates a new configuration file under <code>/etc/logrotate.d/</code> for an application:</p>

<pre><code class="language-yaml">---

- hosts: all
  gather_facts: true
  become: true

  vars:
    logrotate_conf: |
      # Logrotate for application
      /var/log/application/* {
        # Keep 4 versions of file
        rotate 4

        # compress rotated files
        compress

        # Rotates the log files every week
        weekly

        # Ignores the error if the log file is missing
        missingok

        # Does not rotate the log if it is empty
        notifempty

        # Creates a new log file with specified permissions
        create 0755 apache splunk       
      }

  tasks:

    - name: Installs logrotate
      package:
        name: logrotate

    - name: Creates logrotate configuration
      copy:
        content: &quot;{{ logrotate_conf }}&quot;
        dest: /etc/logrotate.d/application
        owner: root
        group: root
        mode: '0644'

</code></pre>

<h3 id="explanation">Explanation</h3>

<ul>
<li><p><strong><code>logrotate_conf</code> variable</strong>: Defines the configuration file for <code>logrotate</code>. It includes options such as file rotation frequency, compression, and file permissions.</p>

<ul>
<li><code>rotate 4</code> – Keeps 4 old versions of the log.</li>
<li><code>compress</code> – Compresses the rotated logs.</li>
<li><code>weekly</code> – Rotates the logs every week.</li>
<li><code>missingok</code> – Ignores errors if the log file is missing.</li>
<li><code>notifempty</code> – Skips log rotation if the log is empty.</li>
<li><code>create 0755 apache splunk</code> – Creates a new log file with specific permissions, owned by <code>apache</code> and <code>splunk</code> groups.</li>
</ul></li>

<li><p><strong>Installs logrotate</strong>: The task ensures that <code>logrotate</code> is installed on the target servers.</p></li>

<li><p><strong>Creates logrotate configuration</strong>: The <code>copy</code> task creates the custom <code>logrotate</code> configuration file under <code>/etc/logrotate.d/</code>, with appropriate permissions.</p></li>
</ul>

<hr />

<p>By using Ansible, you can streamline the management of log rotation across your environment, ensuring consistency in how logs are maintained across all your systems.</p>

</div>


          <footer>
  
<span class="share-box">Share this on:
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.victormendonca.com%2f2024%2f09%2f09%2flogrotate-simplifying-log-management%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-facebook-official "></i></a>

    <a href="https://twitter.com/intent/tweet?text=Logrotate%3a%20Simplifying%20Log%20Management&amp;url=https%3a%2f%2fblog.victormendonca.com%2f2024%2f09%2f09%2flogrotate-simplifying-log-management%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-twitter"></i></a>

    <a href="https://plus.google.com/share?url=https%3a%2f%2fblog.victormendonca.com%2f2024%2f09%2f09%2flogrotate-simplifying-log-management%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-google-plus"></i></a>

    <a href="http://www.reddit.com/submit?url=https%3a%2f%2fblog.victormendonca.com%2f2024%2f09%2f09%2flogrotate-simplifying-log-management%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-reddit"></i></a>

    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.victormendonca.com%2f2024%2f09%2f09%2flogrotate-simplifying-log-management%2f&amp;title=Logrotate%3a%20Simplifying%20Log%20Management" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-linkedin"></i></a>

    <a href="mailto:?subject=Logrotate%3a%20Simplifying%20Log%20Management&amp;body=Check out this site https%3a%2f%2fblog.victormendonca.com%2f2024%2f09%2f09%2flogrotate-simplifying-log-management%2f" data-proofer-ignore=""><i class="fa fa-envelope"></i></a>
  </span>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      
  
    <nav><ul class="pager">
    
        <li class="previous">
          <a href="https://blog.victormendonca.com/2024/02/14/getting-started-with-ansible-console/" title="Getting Started with Ansible Console">
            <span aria-hidden="true">&larr;</span>Previous
          </a>
        </li>
    

    
      <li class="next">
        <a href="https://blog.victormendonca.com/2025/08/22/top-skills-that-will-make-you-stand-out-as-a-linux-admin-part-1/" title="Top Skills That Will Make You Stand Out as a Linux Admin: Part 1">
            Next <span aria-hidden="true">&rarr;</span>
        </a>
      </li>
    
    </ul> </nav>
  


</div>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  

</div>

</footer>

        
        
<nav>
  <ul class="pagination">
    


<li  class="disabled" >
  <a aria-label="First" href="https://blog.victormendonca.com//">
    <span aria-hidden="true">&laquo;&laquo;</span>
  </a>
</li>

<li  class="disabled" >
  <a aria-label="Previous" href="#">
    <span aria-hidden="true">&laquo;</span>
    </a>
</li>

<li  class="active" >
  <a href="https://blog.victormendonca.com//">
    1
    </a>
</li>

<li >
  <a href="https://blog.victormendonca.com//page/2/">
    2
    </a>
</li>

<li >
  <a href="https://blog.victormendonca.com//page/3/">
    3
    </a>
</li>

<li >
  <a href="https://blog.victormendonca.com//page/4/">
    4
    </a>
</li>

<li >
  <a href="https://blog.victormendonca.com//page/5/">
    5
    </a>
</li>

<li >
  <a href="https://blog.victormendonca.com//page/6/">
    6
    </a>
</li>

<li >
  <a href="https://blog.victormendonca.com//page/7/">
    7
    </a>
</li>

<li >
  <a href="https://blog.victormendonca.com//page/8/">
    8
    </a>
</li>

<li >
  <a href="https://blog.victormendonca.com//page/9/">
    9
    </a>
</li>

<li >
  <a href="https://blog.victormendonca.com//page/10/">
    10
    </a>
</li>

<li >
  <a href="https://blog.victormendonca.com//page/11/">
    11
    </a>
</li>

<li >
  <a href="https://blog.victormendonca.com//page/12/">
    12
    </a>
</li>

<li >
  <a href="https://blog.victormendonca.com//page/13/">
    13
    </a>
</li>

<li >
  <a href="https://blog.victormendonca.com//page/14/">
    14
    </a>
</li>

<li >
  <a href="https://blog.victormendonca.com//page/15/">
    15
    </a>
</li>


<li >
  <a aria-label="Next" href="https://blog.victormendonca.com//page/2/">
    <span aria-hidden="true">&raquo;</span>
    </a>
</li>
<li >
  <a aria-label="Last" href="https://blog.victormendonca.com//page/15/">
    <span aria-hidden="true">&raquo;&raquo;</span>
  </a>
</li>


  </ul>
</nav>


      </div>
      
        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
          <div>
  

   
    <div class="section">
      <header><div class="title"></div></header>
      <div class="content">
        <img style="float: center; padding-right: 5px;" src="https://blog.victormendonca.com/img/avatar.jpg" hspace="20" width="240"></img>
        <br/>
        <div class="social-icons" style="display:inline-block; text-align: center; width:100%;">
        <a href="https://github.com/victorbrca" target="_blank"><i class="fa fa-github fa-2x" style="padding-right: 5px; padding-left: 5px" aria-hidden="true"></i></a>
        <a href="https://twitter.com/victorbrca" target="_blank"><i class="fa fa-twitter fa-2x" style="padding-right: 5px; padding-left: 1px" aria-hidden="true"></i></a>
        <a href="http://www.linkedin.com/in/victormendonca" target="_blank"><i class="fa fa-linkedin-square fa-2x" style="padding-right: 5px; padding-left: 1px" aria-hidden="true"></i></a>
        <a href="https://www.facebook.com/victormendonca" target="_blank"><i class="fa fa-facebook-official fa-2x" style="padding-right: 5px; padding-left: 1px" aria-hidden="true"></i></a>
        <div>
        <br/>
      </div>
    </div>

    
      
      
      <div class="section taxonomies">
        <header><div class="title"><b>tags</b></div></header>

        <div class="content1">
          <ul>
            <li><a href="https://blog.victormendonca.com/tags/linux">linux</a></li><li><a href="https://blog.victormendonca.com/tags/bash">bash</a></li><li><a href="https://blog.victormendonca.com/tags/hardware">hardware</a></li><li><a href="https://blog.victormendonca.com/tags/redhat">redhat</a></li><li><a href="https://blog.victormendonca.com/tags/rhcsa">rhcsa</a></li><li><a href="https://blog.victormendonca.com/tags/networking">networking</a></li><li><a href="https://blog.victormendonca.com/tags/ansible">ansible</a></li><li><a href="https://blog.victormendonca.com/tags/freenas">freenas</a></li><li><a href="https://blog.victormendonca.com/tags/kde">kde</a></li><li><a href="https://blog.victormendonca.com/tags/monitoring">monitoring</a></li><li><a href="https://blog.victormendonca.com/tags/shell">shell</a></li><li><a href="https://blog.victormendonca.com/tags/storage">storage</a></li><li><a href="https://blog.victormendonca.com/tags/vim">vim</a></li><li><a href="https://blog.victormendonca.com/tags/virtualization">virtualization</a></li><li><a href="https://blog.victormendonca.com/tags/arch">arch</a></li><li><a href="https://blog.victormendonca.com/tags/containers">containers</a></li><li><a href="https://blog.victormendonca.com/tags/docker">docker</a></li><li><a href="https://blog.victormendonca.com/tags/macos">macos</a></li><li><a href="https://blog.victormendonca.com/tags/pfsense">pfsense</a></li><li><a href="https://blog.victormendonca.com/tags/systemd">systemd</a></li>
          </ul>
        </div>
      </div>
      
    
      
      
    

    <br />

    <div class="section">
      <header><div class="title"><b>Latest Posts</b></div></header>
      <div class="content">
        <ul>
        
          <li>
          <a href="https://blog.victormendonca.com/2025/09/25/lxd-creating-reusable-rhel-9-vm-images/">LXD: Creating Reusable RHEL 9 VM Images</a>
          </li>
        
          <li>
          <a href="https://blog.victormendonca.com/2025/09/17/how-to-install-windows-on-lxd/">How to install Windows on LXD</a>
          </li>
        
          <li>
          <a href="https://blog.victormendonca.com/2025/09/03/exploring-lxd-the-linux-container-daemon/">Exploring LXD (The Linux Container Daemon)</a>
          </li>
        
          <li>
          <a href="https://blog.victormendonca.com/2025/08/22/top-skills-that-will-make-you-stand-out-as-a-linux-admin-part-1/">Top Skills That Will Make You Stand Out as a Linux Admin: Part 1</a>
          </li>
        
          <li>
          <a href="https://blog.victormendonca.com/2024/09/09/logrotate-simplifying-log-management/">Logrotate: Simplifying Log Management</a>
          </li>
        
          <li>
          <a href="https://blog.victormendonca.com/2024/02/14/getting-started-with-ansible-console/">Getting Started with Ansible Console</a>
          </li>
        
          <li>
          <a href="https://blog.victormendonca.com/2023/12/21/playing-a-sound-on-headless-server-boot/">Playing a Sound on Headless Server Boot</a>
          </li>
        
        </ul>
      </div>
    </div>

    <br />

    
    <div class="section">
    
      
      <div class="content" align="center" >
        <a class="twitter-timeline" data-width="240" data-height="450" href="https://twitter.com/victorbrca">Tweets by victorbrca</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
      </div>
    </div>

</div>

        </div>
      
    </div>

  </div>

    
<footer class="footer hidden-print">
  <div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
           <div class="pull-left">
  <a class="toplink" href="javascript:" id="return-to-top">back to top</a>
</div>
<div class="pull-right">

</div>

        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center">
              
    
<div class="container footline">
    <small>
  code with <i class='fa fa-linux'></i>

</small>
</div>


    
<div class="container copyright">
    <small>
  &copy; 2018 Copyright Victor Mendonça

  </small>
</div>



        </div>
    </div>
  </div>
</footer>

    

<script src="https://blog.victormendonca.com/js/jquery.min.js"></script>
<script src="https://blog.victormendonca.com/js/bootstrap.min.js"></script>


<script src="https://blog.victormendonca.com/js/highlight.pack.js"></script>
<script src="https://blog.victormendonca.com/js/site.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script>
var ENABLE_POPOVER =  false , 
EXPIRE_COOKIE =  5 , 
SHOW_MODAL_TIMEOUT =  10000 , 
MOUSE_LEAVE =  true , 
MODAL_SIZE = "", 
POST_URL = "https://zapier.com/hooks/catch/1227563/", 
SIGNUP_HEADER = "Join Our Newsletter",
HEADER_IMAGE = "//placehold.it/1000x600",
IMG_DESCRIPTION = "Placeholder image for this popover modal optin form",
SIGNUP_TEXT = "Signup today for free and be the first to get notified on new updates.",
INPUT_PLACEHOLDER = "Enter your email",
SUBMIT_BUTTON = "Subscribe",
SUCCESS_MESSAGE = "Thanks for your subscription!",
ERROR_MESSAGE = "Submitting form failed!",
OPTIN =  true ,
COOKIE_NAME = "mycookie1",
CONTENTLANGUAGE = ""; 
</script>





<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/config/TeX-AMS-MML_HTMLorMML.js"></script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[','\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    for(var all in MathJax.Hub.getAllJax()) {
        all.SourceElement().parentNode.className += ' has-jax';

    }
});
</script>






  </body>
</html>

